<!DOCTYPE html>
<html>
<head>
  <title>Cash Tow Me Driver</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- PWA manifest -->
  <link rel="manifest" href="manifest.json">

  <!-- Register service worker -->
  <script>
    if ("serviceWorker" in navigator) {
      navigator.serviceWorker.register("service-worker.js");
    }
  </script>

  <style>
    body {
      font-family: Arial;
      text-align: center;
      padding: 20px;
    }

    ul {
      text-align: left;
      max-width: 320px;
      margin: auto;
    }

    input {
      width: 90%;
      padding: 10px;
      margin: 8px 0;
    }

    button {
      padding: 15px;
      font-size: 18px;
      margin-top: 15px;
      cursor: pointer;
    }

    #driver-list div {
      border: 1px solid #ccc;
      padding: 10px;
      margin: 5px 0;
    }
  </style>
</head>

<body>

  <h1>üöõ Cash Tow Me ‚Äì Driver</h1>

  <h3 id="driver-status">Status: OFF</h3>

  <input id="driver-name" placeholder="Driver Name"><br>
  <input id="driver-city" placeholder="City"><br>
  <input id="driver-truck" placeholder="Truck Type (Flatbed, Wheel Lift, etc.)"><br>

  <button id="add-driver">Add Driver</button>
  <button id="toggle-status">Toggle Status</button>

  <h2>Driver List</h2>
  <div id="driver-list"></div>

  <p><strong>Get Cash Tow Calls</strong></p>

  <ul>
    <li>$5 per day or $30 per month</li>
    <li>Manual approval required</li>
    <li>Customer pays you directly</li>
    <li>No commissions</li>
  </ul>

  <p>
    To activate:<br>
    üìß Email: <strong>cashtowme@gmail.com</strong><br>
    üìû Phone: <strong>214-309-8955</strong>
  </p>

  <a href="mailto:cashtowme@gmail.com?subject=Driver%20Application%20‚Äì%20Cash%20Tow%20Me&body=Hello,%0D%0A%0D%0AI%20would%20like%20to%20apply%20to%20be%20a%20Cash%20Tow%20Me%20driver.%20Please%20let%20me%20know%20the%20next%20steps.%0D%0A%0D%0AThank%20you!">
    <button>Apply to Drive</button>
  </a>

  <script>
    const statusEl = document.getElementById("driver-status");
    const toggleBtn = document.getElementById("toggle-status");

    const nameInput = document.getElementById("driver-name");
    const cityInput = document.getElementById("driver-city");
    const truckInput = document.getElementById("driver-truck");

    const addBtn = document.getElementById("add-driver");
    const driverListEl = document.getElementById("driver-list");

    // Load saved data
    let drivers = JSON.parse(localStorage.getItem("drivers") || "[]");

    // Render driver list
    function renderDrivers() {
      driverListEl.innerHTML = "";
      drivers.forEach((driver, index) => {
        const div = document.createElement("div");
        div.innerHTML = `
          <strong>${driver.name}</strong> ‚Äì ${driver.truck} <br>
          üìç ${driver.city} <br>
          Status: ${driver.status} <br>
          <button onclick="toggleDriverStatus(${index})">Toggle Status</button>
          <button onclick="removeDriver(${index})">Remove</button>
        `;
        driverListEl.appendChild(div);
      });
    }

    // Add new driver
    addBtn.addEventListener("click", () => {
      const name = nameInput.value.trim();
      const city = cityInput.value.trim();
      const truck = truckInput.value.trim();

      if (!name || !city || !truck) {
        alert("Please fill in all fields");
        return;
      }

      drivers.push({
        name,
        city,
        truck,
        status: "OFF"
      });

      localStorage.setItem("drivers", JSON.stringify(drivers));
      nameInput.value = "";
      cityInput.value = "";
      truckInput.value = "";
      renderDrivers();
    });

    // Toggle global driver status
    toggleBtn.addEventListener("click", () => {
      if (statusEl.textContent.includes("OFF")) {
        statusEl.textContent = "Status: ON";
      } else {
        statusEl.textContent = "Status: OFF";
      }
      localStorage.setItem("driverStatus", statusEl.textContent);
    });

    // Toggle individual driver status
    function toggleDriverStatus(index) {
      drivers[index].status = drivers[index].status === "OFF" ? "ON" : "OFF";
      localStorage.setItem("drivers", JSON.stringify(drivers));
      renderDrivers();
    }

    // Remove driver
    function removeDriver(index) {
      drivers.splice(index, 1);
      localStorage.setItem("drivers", JSON.stringify(drivers));
      renderDrivers();
    }

    // Initial render
    renderDrivers();
  </script>

</body>
</html>
